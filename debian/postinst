#!/bin/bash
# Post-installation script for pomodoro-lock

set -e

case "$1" in
    configure)
        echo "Pomodoro Lock - Userspace Installation"
        echo "======================================"
        echo ""
        echo "The application has been installed to /usr/share/pomodoro-lock"
        echo "User data will be stored in ~/.local/share/pomodoro-lock"
        echo ""
        echo "New Architecture:"
        echo "  - Service: Manages timer, notifications, and overlays"
        echo "  - UI: Lightweight display client that reads from service"
        echo ""
        echo "Available commands:"
        echo "  pomodoro-lock      - Start UI client (default)"
        echo "  pomodoro-lock ui   - Start UI client"
        echo "  pomodoro-lock service - Start the systemd service"
        echo "  pomodoro-lock stop - Stop the systemd service"
        echo "  pomodoro-lock status - Show service status"
        echo "  pomodoro-lock legacy - Run in legacy single-process mode"
        echo "  pomodoro-configure - Configure the application"
        echo ""
        echo "Recommended usage:"
        echo "  1. Start the service: pomodoro-lock service"
        echo "  2. Start the UI: pomodoro-lock ui"
        echo "  3. The UI will automatically connect to the service"
        echo ""
        echo "The first time you run 'pomodoro-lock', it will:"
        echo "  1. Create a virtual environment in ~/.local/share/pomodoro-lock/venv"
        echo "  2. Install Python dependencies"
        echo "  3. Set up user configuration"
        echo "  4. Configure systemd user service"
        echo ""
        echo "To get started, run: pomodoro-lock service"
        echo ""
        ;;
    abort-upgrade|abort-remove|abort-deconfigure)
        ;;
    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

exit 0 